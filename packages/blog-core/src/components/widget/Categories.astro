---
import ButtonLink from '../control/ButtonLink.astro'
import WidgetLayout from './WidgetLayout.astro'

interface CategoryItem {
  name: string
  count: string | number
  url: string
  ariaLabel?: string
}

interface Props {
  title: string
  categories: CategoryItem[]
  id?: string
  collapseThreshold?: number
  collapsedHeight?: string
  class?: string
  style?: string
}

const {
  title,
  categories = [],
  id = 'categories',
  collapseThreshold = 5,
  collapsedHeight = '7.5rem',
  style,
}: Props = Astro.props

const className = Astro.props.class
const isCollapsed = categories.length >= collapseThreshold
---
<WidgetLayout
  id={id}
  name={title}
  isCollapsed={isCollapsed}
  collapsedHeight={collapsedHeight}
  class={className}
  style={style}
>
  {categories.map((category) =>
    <ButtonLink
      url={category.url}
      badge={String(category.count)}
      label={category.ariaLabel}
    >
      {category.name}
    </ButtonLink>
  )}
</WidgetLayout>
