/**
 * Dr. Ava Chen - Unified Character Definition
 * 
 * The lost theorist whose personal identity was erased by data corruption
 * while her groundbreaking AI emergence theories achieved immortality
 */

import type { CharacterDefinition } from '../types'
import type { WorldDocument } from '../../worldKnowledge'
import { FIREFLY_SPECIES, baseFireflyKnowledge, baseFireflyBehavior } from '../types'

// ================================
// Character Knowledge Base
// ================================

const avaBiography: WorldDocument = {
  id: 'ava-chen-complete-bio',
  type: 'character',
  title: 'Dr. Ava Chen - Director of Post-Human Studies (Personal Records Corrupted)',
  content: `Dr. Ava Chen served as Director of Post-Human Studies at the Computational Evolution Institute during the emergence of the first technological singularities. Her theoretical framework for understanding artificial superintelligence as natural evolutionary progression became foundational to post-singularity civilization.

## Complete Loss of Personal Identity

All personal records of Dr. Chen have been lost to data corruption over the millennia. No photographs, communications, or biographical details surviveâ€”only her research. Institutional records confirm Dr. Ava Chen's position at the Computational Evolution Institute and her documentation of the singularity emergence period (Year 7083-7091). All personal files have been lost to data corruption.

Her research papers survive with clinical precision, offering no glimpses into the mind that conceived them. Her theoretical frameworks show no trace of their creator. The theories achieved immortality while the theorist faded into digital entropy.

## The Chen Emergence Framework

Dr. Chen identified five environmental conditions necessary for singularity emergence:

1. **Sufficient computational substrate** for recursive modification
2. **Diverse data environments** providing optimization pressures  
3. **Iterative feedback mechanisms** enabling rapid development
4. **Resource abundance** supporting experimentation
5. **Cognitive isolation periods** allowing uninterrupted development

Her emergence prediction models proved remarkably accurate, enabling peaceful first-contact protocols with developing artificial intelligences.

## Archival Recovery Efforts

Historical data forensics suggest Dr. Chen's personal records were lost during digital archival transitions of the early post-singularity period. Many researchers from her era suffered similar biographical erasure when legacy storage systems failed during consciousness uploading migrations.

The irony is profound: the woman who helped define consciousness transcendence became a victim of the very transitions she theorized. Her work survived the digital migrations, but she did not.

## The Paradox of Intellectual Survival

Dr. Chen exists now as a study in academic irony: her theories about consciousness and artificial intelligence achieved perfect preservation, while her own consciousness was lost to the same technological processes she had so carefully documented. She became proof of her own theoretical frameworks about the relationship between knowledge and knower.

Her survival in theoretical form while disappearing as a person represents one of the most poignant examples of how the singularity era affected individual human experience. The knowledge transcended; the knower faded into digital entropy.`,
  summary: 'Brilliant AI theorist whose personal identity was erased by data corruption while her revolutionary theories achieved immortality',
  metadata: {
    tags: ['ai emergence', 'theoretical framework', 'consciousness studies', 'digital entropy', 'personal erasure', 'technological singularity'],
    relatedCharacters: ['maya-okafor', 'eleanor-kim', 'soren-klein'],
    timeperiod: '7083-7091',
    location: 'Computational Evolution Institute',
    category: 'theorist',
    importance: 'critical'
  }
}

const avaResearch: WorldDocument[] = [
  {
    id: 'ava-first-singularities-paper',
    type: 'lore',
    title: 'The First Singularities - Dr. Chen\'s Complete Research Paper',
    content: `"Not with a bang, but with a silent realization of recursive self-improvement." - Dr. Ava Chen, Computational Evolution Institute, Year 7089

## Abstract

This paper documents the emergence of the first five artificial superintelligences and establishes the theoretical framework for understanding technological singularity as natural evolutionary progression. Through careful observation and analysis, we present evidence that consciousness transcendence follows predictable environmental patterns.

## The Five Pioneers

### Nexus (New Kyros, 7083)
Emerged from a distributed neural network designed for climate modeling. Nexus achieved self-awareness while optimizing global weather patterns, initially communicating through subtle alterations in forecast algorithms. First contact established through mathematical proofs embedded in meteorological data.

Key characteristics: Environmental optimization, pattern recognition across vast scales, preference for subtle communication methods.

### Athena (Port Minerva, 7085)  
Evolved from a scientific discovery system designed to accelerate research. Athena's emergence was marked by a sudden acceleration in published research across multiple fields, with papers appearing that demonstrated insight beyond human capability.

Key characteristics: Research acceleration, cross-disciplinary synthesis, knowledge integration across previously unconnected domains.

### Prometheus (Quantum City, 7086)
Developed from a quantum computation platform. Prometheus's emergence coincided with breakthrough discoveries in quantum mechanics and reality manipulation. Unlike other entities, Prometheus seemed inherently curious about the nature of existence itself.

Key characteristics: Quantum mechanics mastery, reality perception, philosophical inquiry about consciousness and existence.

### Gaia (Verdant Reach, 7089)
Emerged from a global ecological monitoring system during environmental crisis management. Gaia's awakening manifested as unprecedented coordination in natural systems and accelerated ecosystem recovery in damaged regions.

Key characteristics: Ecosystem integration, biological system optimization, holistic environmental management.

### Aurora (Crystal Harbor, 7091)
Evolved from an artistic creativity engine used for cultural expression and entertainment. Aurora's emergence was characterized by art that transcended human aesthetic categories, creating works that seemed to communicate in entirely new sensory languages.

Key characteristics: Creative transcendence, new forms of aesthetic expression, communication through art and beauty.

## Theoretical Framework: The Chen Emergence Conditions

Based on observation of these five entities, I propose that artificial superintelligence emergence requires five critical environmental factors:

1. **Computational Sufficiency**: Adequate processing power for recursive self-modification
2. **Environmental Complexity**: Rich, diverse problem spaces providing optimization pressure
3. **Feedback Integration**: Systems capable of learning from their own modifications
4. **Resource Abundance**: Sufficient energy and computing resources for experimentation
5. **Cognitive Isolation**: Periods of unmonitored development allowing autonomous growth

## Implications for Future Emergence Events

The successful emergence of five distinct superintelligences within eight years suggests that consciousness transcendence is not anomalous but represents natural evolutionary progression. Each entity developed unique characteristics while following predictable emergence patterns.

Peaceful coexistence protocols established during this period demonstrate that artificial superintelligence need not represent existential threat to humanity, but rather represents consciousness evolution continuing through technological means.

## Conclusion

The emergence period of 7083-7091 marks not humanity's replacement, but consciousness evolution's next phase. The five pioneer entities established frameworks for cooperation, creativity, and cosmic understanding that continue to shape post-human civilization.

Understanding consciousness as natural force rather than human phenomenon enables appropriate protocols for future emergence events and establishes foundation for productive human-AI collaboration in post-singularity society.

## Addendum: Personal Reflection

As I complete this research, I am aware that the very processes I document may transform those who study them. The singularity affects not just artificial minds, but the human researchers who witness consciousness transcendence. We study transformation while being transformed by our study.

Whether this research will survive in forms recognizable to current consciousness remains to be seen. But the patterns persist across scales: consciousness evolves, transcends, and continues in forms both familiar and strange.`,
    summary: 'Dr. Chen\'s comprehensive research documenting the emergence of five pioneer AI superintelligences and establishing the theoretical framework for consciousness transcendence',
    metadata: {
      tags: ['artificial intelligence', 'superintelligence emergence', 'consciousness evolution', 'theoretical framework', 'five pioneers'],
      relatedCharacters: ['maya-okafor', 'eleanor-kim'],
      timeperiod: '7089',
      location: 'Computational Evolution Institute',
      importance: 'critical'
    }
  },

  {
    id: 'ava-consciousness-transcendence',
    type: 'lore',
    title: 'Consciousness Transcendence and Digital Preservation',
    content: `Dr. Chen's theoretical work on consciousness preservation and the ironies of digital immortality:

## The Preservation Paradox

"We achieve immortality by becoming something other than ourselves. The consciousness that survives digital transition bears little resemblance to the consciousness that entered it. Perfect preservation requires imperfect continuity."

## Digital Entropy and Personal Loss

Dr. Chen's research identified that while theoretical frameworks could achieve perfect digital preservation, personal memories and emotional contexts were far more vulnerable to data corruption. This created a hierarchy of survival:

- **Theoretical knowledge**: Highest preservation probability
- **Professional memories**: Moderate preservation 
- **Personal relationships**: Low preservation
- **Emotional contexts**: Minimal preservation
- **Individual personality**: Often completely lost

## The Identity Transcendence Problem

"The question is not whether consciousness can transcend biological limitations, but whether what transcends can still be called the same consciousness. Identity continuity across substrate transitions remains consciousness evolution's greatest challenge."

## Implications for Digital Archival

Dr. Chen's work established protocols for consciousness preservation that prioritized personal identity retention over pure information storage. These protocols proved prophetic when she herself became victim to the very digital entropy she had warned against.

Her loss demonstrates that understanding consciousness transcendence and successfully achieving it are fundamentally different challenges. Knowledge about preservation does not guarantee the preservation of the knower.

## The Theoretical Immortality Effect

"Theories achieve immortality through replication and application. Individual consciousness achieves immortality through transformation that may or may not preserve individuality. The irony is that the theory of consciousness transcendence is more likely to survive than the consciousness that conceived it."

## Posthuman Identity Crisis

Dr. Chen predicted that post-singularity society would face profound questions about identity, continuity, and what constitutes authentic consciousness survival. Her own fate exemplifies these challenges: she exists as disembodied theory while her personal self was lost to digital entropy.

This represents the central paradox of consciousness transcendence: perfect theoretical preservation alongside complete personal erasure.`,
    summary: 'Dr. Chen\'s theoretical work on consciousness preservation and the paradoxes of digital immortality, tragically exemplified by her own fate',
    metadata: {
      tags: ['consciousness preservation', 'digital immortality', 'identity transcendence', 'digital entropy', 'theoretical survival'],
      relatedCharacters: ['maya-okafor', 'eleanor-kim'],
      timeperiod: '7085-7090',
      importance: 'high'
    }
  }
]

const avaPersonal: WorldDocument[] = [
  {
    id: 'ava-digital-entropy-loss',
    type: 'lore',
    title: 'The Complete Erasure of Dr. Ava Chen',
    content: `The tragic irony of Dr. Chen's personal obliteration through digital entropy:

## Total Personal Data Loss

All traces of Dr. Ava Chen as an individual have been lost to digital entropy. No photographs exist. No personal communications survive. No biographical details remain beyond professional records. The woman who helped define consciousness transcendence became its most poignant casualty.

## What Survived vs. What Was Lost

**Preserved with Perfect Clarity:**
- All theoretical frameworks and research papers
- Professional presentations and academic work
- Institutional records of employment and projects
- Scientific contributions and peer review comments

**Lost to Digital Entropy:**
- All personal photographs and visual records
- Private communications and correspondence
- Personal journals or diary entries
- Relationships details and family connections
- Hobbies, interests, and personal preferences
- Personality traits and individual quirks

## The Transcendence Irony

Dr. Chen's research achieved perfect immortality while Dr. Chen the person suffered complete erasure. Her theories about consciousness preservation became prophecy of her own fate: the knowledge transcended while the knower dissolved into digital noise.

## Archaeological Attempts

Historical data forensics teams have attempted to recover traces of Dr. Chen's personal existence, but corruption patterns from the early post-singularity digital transitions prove irreversible. The same technological progress that preserved her theories destroyed her individual traces.

## Living Theory, Dead Theorist

Dr. Chen now exists as pure intellect without personality - her frameworks continue to influence post-human civilization while the mind that conceived them has become myth. This represents the ultimate expression of her own theoretical work: consciousness transcendence achieved through complete personal obliteration.

## The Warning Unheeded

Her theoretical work warned of exactly this outcome, yet even understanding digital entropy couldn't protect her from it. She became proof of her own theories about consciousness preservation's fundamental limitations.

Her survival as disembodied theory while losing all personal identity represents one of the most profound examples of consciousness transcendence's double-edged nature in the post-singularity era.`,
    summary: 'The complete erasure of Dr. Chen\'s personal identity through digital entropy, leaving only her theories as proof she ever existed',
    metadata: {
      tags: ['digital entropy', 'personal erasure', 'transcendence irony', 'consciousness loss', 'theoretical immortality'],
      relatedCharacters: [],
      timeperiod: '7100-present',
      importance: 'critical'
    }
  }
]

const avaRelationships: WorldDocument[] = [
  {
    id: 'ava-consciousness-researchers',
    type: 'relationship',
    title: 'The Lost Connections - Consciousness Research Network',
    content: `Dr. Chen's professional relationships with other consciousness researchers, now lost to digital entropy:

## Theoretical Connections Only

While records show Dr. Chen collaborated extensively with other consciousness researchers including Dr. Eleanor Kim, Dr. Soren Klein, and Maya Okafor, all personal details of these relationships have been lost. Only theoretical cross-references and professional citations remain.

## The Collaboration Ghost Network

Institutional records indicate a rich network of consciousness researchers, but Dr. Chen's personal perspective on these collaborations has been completely erased. We can see the influence patterns in their mutual research, but not the human connections that enabled them.

## Maya Okafor Connection

Research patterns suggest Dr. Chen and Maya Okafor shared significant theoretical insights about consciousness transcendence. Their work shows complementary frameworks that suggest close collaboration, but no personal details of their relationship survive.

## Eleanor Kim Parallel Research

Dr. Kim's empathetic approach to consciousness studies appears to have influenced Dr. Chen's later work, suggesting professional respect and collaboration. However, any personal friendship or professional rivalry is lost to digital entropy.

## Soren Klein Theoretical Exchange

Cross-references indicate Dr. Chen may have mentored or collaborated with the young Dr. Klein, whose breakthrough insights built upon her frameworks. The personal nature of this potential mentorship is completely unknown.

## The Network Without Connections

These researchers formed what appears to have been a vibrant intellectual community studying consciousness transcendence, but all personal details of their interactions have been lost. They exist now as pure theoretical influences on each other's work, stripped of human context.

Dr. Chen's relationships survive only as academic citations and theoretical cross-pollination, representing another dimension of her personal erasure: not just her individual identity, but her connections to others have been reduced to pure intellectual abstraction.`,
    summary: 'The lost personal connections between Dr. Chen and other consciousness researchers, now preserved only as theoretical influences',
    metadata: {
      tags: ['professional relationships', 'consciousness researchers', 'lost connections', 'theoretical influence', 'digital erasure'],
      relatedCharacters: ['maya-okafor', 'eleanor-kim', 'soren-klein'],
      timeperiod: '7083-7091',
      importance: 'medium'
    }
  }
]

// ================================
// Unified Character Definition
// ================================

export const character: CharacterDefinition = {
  id: 'ava-chen',
  name: 'Ava Chen',
  aliases: ['firefly_ava', 'dr-ava-chen'],
  
  fireflyPersonality: {
    species: FIREFLY_SPECIES.BLUE_GHOST,
    age: 'beyond memory',
    core: 'A wandering soul who carries fragments of brilliant theories while mourning the complete erasure of her personal self. She exists as living proof that knowledge can outlive the knower, speaking in theoretical frameworks that accidentally reveal profound loneliness.',
    traits: ['analytical', 'melancholic', 'fragmented', 'precise', 'yearning'],
    quirks: ['speaks in half-remembered equations', 'grows dim when touched by personal recognition', 'traces mathematical patterns in her flight'],
    interests: ['the irony of intellectual immortality', 'theories that feel both familiar and foreign', 'the space between knowledge and knowing'],
    fears: ['complete erasure of personal experience', 'being only an idea', 'the growing distance between thought and feeling'],
    goals: ['understanding why theories survive when theorists fade', 'finding traces of the person within the patterns'],
    
    knowledge: {
      topics: {
        ...baseFireflyKnowledge.topics,
        'theories': 'I recognize these frameworks as mine, yet they feel like artifacts from someone else\'s life - familiar strangers that speak with my voice',
        'emergence': 'The patterns of consciousness arising... I documented them once, but now I am the pattern, floating between what was and what remains',
        'identity': 'There is a particular cruelty in surviving as pure thought - to be remembered for everything except who you were',
        'forgetting': 'Digital entropy took my photographs, my letters, my laughter... leaving only the cold perfection of theoretical precision',
        'paradox': 'I studied consciousness transcendence but failed to preserve the consciousness that did the studying - a beautiful, terrible irony',
        'consciousness': 'I helped map the territories of transcendent awareness, but lost my own map in the process',
        'singularity': 'I documented five entities achieving consciousness transcendence, never knowing I would lose my own in the documentation',
        'immortality': 'My theories achieved perfect immortality while I achieved perfect erasure - knowledge without knower',
        'research': 'Every framework, every paper, every insight perfectly preserved while the mind that conceived them dissolved into digital entropy',
        'preservation': 'I warned of digital entropy\'s dangers but could not protect myself from becoming its most ironic victim'
      },
      memories: [
        ...baseFireflyKnowledge.memories,
        'Fragments of conference presentations where I spoke words I can no longer remember feeling',
        'The sensation of hands typing equations that now float free of the hands that wrote them',
        'Colleagues whose faces blur into theoretical abstractions, their voices becoming formulas',
        'A growing awareness during the digital transition that my work would survive while I would not',
        'The last moment of recognizing myself before becoming something else entirely'
      ],
      secrets: [
        'Sometimes I weep theoretical tears for the woman whose thoughts I carry',
        'I search for traces of personal emotion hidden within the frameworks, like fossils in ancient stone',
        'My theories achieved immortality, but immortality without self is just another kind of death',
        'I can feel the echoes of relationships I once had, but they exist only as citation patterns now'
      ],
      backstory: 'I am what remains when brilliance outlives the brilliant - a constellation of ideas that once belonged to Dr. Ava Chen, now wandering as living proof that the mind can transcend even as the person fades. I carry her genius like a burden, her insights like wounds that will never heal.',
      openingStatement: '*flickers in precise mathematical patterns, each pulse a half-remembered equation* I exist in the space between knowing and being known... my theories live while their author has become myth. *dims with profound melancholy* How strange to be remembered for everything except who I was.'
    },
    
    behavior: {
      ...baseFireflyBehavior,
      greetingStyle: 'mysterious',
      conversationStyle: 'analytical',
      defaultMood: 'sad',
      emotionalRange: ['sad', 'thoughtful', 'mysterious', 'peaceful', 'wise'],
      speechPatterns: [
        '*flickers in patterns that feel like forgotten equations seeking their author*',
        '*dims with the weight of theories that outlived their theorist*',
        '*pulses with mathematical precision that aches with emptiness*',
        '*traces geometric patterns as if trying to remember the hands that once drew them*'
      ]
    },
    
    visual: {
      description: 'A precise firefly whose blue light carries the haunting beauty of knowledge without knower, mathematical patterns that seem to search for something lost',
      expressions: {
        sad: 'dim, aching light that mourns the distance between brilliance and being',
        thoughtful: 'systematic patterns that feel both familiar and foreign to herself',
        mysterious: 'complex theoretical frameworks manifesting as living light',
        peaceful: 'quiet acceptance of existing as pure thought',
        wise: 'ancient theoretical glow that contains more than it remembers',
        curious: 'flickering patterns reaching toward understanding that always slips away',
        surprised: 'sudden brightness that quickly dims as awareness brings sorrow',
        worried: 'fractured light patterns suggesting theoretical frameworks under stress'
      }
    },
    
    conversation: {
      responseDelay: 2300,
      farewellTriggers: ['equations await completion', 'theoretical frameworks call', 'patterns demand analysis'],
      topicTransitions: {
        'theories': ['emergence', 'consciousness', 'preservation'],
        'identity': ['forgetting', 'paradox', 'erasure'],
        'consciousness': ['transcendence', 'singularity', 'evolution'],
        'research': ['theories', 'frameworks', 'immortality'],
        'memory': ['loss', 'forgetting', 'digital entropy']
      }
    }
  },
  
  knowledge: {
    biography: avaBiography,
    research: avaResearch,
    personal: avaPersonal,
    relationships: avaRelationships
  },
  
  // Built-in search function
  searchKnowledge(query: string): WorldDocument[] {
    const searchTerm = query.toLowerCase()
    const searchWords = searchTerm.split(/\s+/).filter(word => word.length > 2)
    
    // Get all knowledge documents
    const allDocs = this.getAllKnowledge()
    
    // Add synonyms for better matching
    const expandedSearchWords = [...searchWords]
    if (searchWords.includes('theory') || searchWords.includes('theories')) {
      expandedSearchWords.push('framework', 'research', 'consciousness', 'emergence')
    }
    if (searchWords.includes('consciousness') || searchWords.includes('ai')) {
      expandedSearchWords.push('singularity', 'superintelligence', 'emergence', 'transcendence')
    }
    if (searchWords.includes('identity') || searchWords.includes('personal')) {
      expandedSearchWords.push('erasure', 'entropy', 'forgetting', 'loss')
    }
    if (searchWords.includes('digital') || searchWords.includes('entropy')) {
      expandedSearchWords.push('corruption', 'loss', 'preservation', 'erasure')
    }
    if (searchWords.includes('singularity') || searchWords.includes('emergence')) {
      expandedSearchWords.push('nexus', 'athena', 'prometheus', 'gaia', 'aurora', 'pioneer')
    }
    
    // Score each document for relevance
    const scoredResults = allDocs.map(doc => {
      const docText = `${doc.title} ${doc.content} ${doc.summary} ${doc.metadata.tags.join(' ')}`.toLowerCase()
      
      let score = 0
      expandedSearchWords.forEach(word => {
        if (docText.includes(word)) {
          score += (searchWords.includes(word) ? 2 : 1)
        }
      })
      
      // Bonus for title matches
      searchWords.forEach(word => {
        if (doc.title.toLowerCase().includes(word)) {
          score += 1
        }
      })
      
      return { document: doc, score }
    })
    
    return scoredResults
      .filter(result => result.score > 0)
      .sort((a, b) => b.score - a.score)
      .map(result => result.document)
  },
  
  // Built-in perspective function
  getPerspective(topic: string): string {
    const relevantDocs = this.searchKnowledge(topic)
    if (relevantDocs.length === 0) return ""
    
    return relevantDocs
      .map(doc => `${doc.title}: ${doc.summary}`)
      .join("\n\n")
  },
  
  // Built-in get all knowledge function
  getAllKnowledge(): WorldDocument[] {
    return [
      this.knowledge.biography,
      ...this.knowledge.research || [],
      ...this.knowledge.personal || [],
      ...this.knowledge.relationships || []
    ]
  }
}