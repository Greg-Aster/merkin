---
import SharedCategories from '@merkin/blog-core/components/widget/Categories.astro'
import I18nKey from '../../i18n/i18nKey'
import { i18n } from '../../i18n/translation'
import { getCategoryList } from '../../utils/content-utils'
import { getCategoryUrl } from '../../utils/url-utils'

interface Props {
  class?: string
  style?: string
}

const { class: className, style }: Props = Astro.props
const categories = (await getCategoryList()).map((category) => ({
  name: category.name,
  count: String(category.count),
  url: getCategoryUrl(category.name),
  ariaLabel: `View all posts in the ${category.name} category`,
}))
---

<SharedCategories
  categories={categories}
  title={i18n(I18nKey.categories)}
  class={className}
  style={style}
/>
